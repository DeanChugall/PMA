{% extends "auctions/auctions_base.html" %}
{% load static %}
{% load widget_tweaks %}

{% block title %} Zahtev {{ auction.title }} {% endblock %}

{% block meta_data %}
    <meta charset="UTF-8">
    <meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=0'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="author" content="@PMA Technologies Private Limited">
    <meta name="description" content="@PMA Dashboard">
    <meta name="keywords" content="Popravi Moj Auto.">
{% endblock meta_data %}

{% block app_content %}
    <div class="main-content app-content mt-0">
        <div class="side-app">

            <!-- CONTAINER -->
            <div class="main-container container-fluid">

                <!-- PAGE-HEADER -->
                <div class="page-header">
                    <h1 class="page-title">Kreiranje Zahteva</h1>
                    <div>
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="{% url 'ponude:ponude' %}">Početna</a></li>
                            <li class="breadcrumb-item active" aria-current="page">Kreiranje Zahteva</li>
                        </ol>
                    </div>
                </div>
                <!-- PAGE-HEADER END -->

                <!-- ROW-1 OPEN -->
                <div class="row">
                    <div class="col-lg-12">
                        <!-- FORMA UNOSA ZAHTEVA -->
                        <form  action='' class="ogin100-form validate-form" method='POST' enctype='multipart/form-data'>
                            {% csrf_token %}
                            <div class="card">
                                <div class="card-header">
                                    <div class="card-title">Dodaj Novi Zahtev</div>
                                </div>
                                {% if success %}
                                    <div class="card-body">
                                        <div class="row mb-4">
                                            <br>
                                            <div id='success-alert' class='alert alert-success' role='alert'>Zahtev je uspešno postavljen!</div>
                                        </div>
                                    </div>
                                    <div class="card-footer">
                                        <!--Row-->
                                        <div class="d-grid gap-2 col-6 mx-auto">
                                            <a href="{% url 'ponude:aktivni_zahtevi_vozaca' user.username %}" class="btn btn-primary btn-lg">Pregled Vaših Zahteva</a>
                                        </div>
                                        <!--End Row-->
                                    </div>
                                {% else %}


                                    <div class="card-body">
                                        <div class="row mb-4">
                                            <label class="col-md-3 form-label">Kratak Opis Zahteva :</label>
                                            <div class="col-md-9">
                                                {% render_field auction_form.title class="form-control" placeholder="Product Name" %}
                                            </div>
                                        </div>
                                        <div class="row mb-4">
                                            <label class="col-md-3 form-label">Odaberi Kategoriju :</label>
                                            <div class="col-md-9">
                                                {{ auction_form.category }}
                                            </div>
                                        </div>

                                        <!-- Row -->
                                        <div class="row">
                                            <label class="col-md-3 form-label mb-4">Detaljan Opis Zahteva:</label>
                                            <div class="col-md-9 mb-4">
                                                <!--                                            {{ auction_form.description|add_class:"content"|attr:"name:example"}}-->
                                                <!--                                            {{ auction_form.description }}-->
                                                {% render_field auction_form.description class="form-control" placeholder="opis" %}
                                            </div>
                                        </div>
                                        <!--End Row-->

                                        <!--Row-->
                                        <div class="row">
                                            <label class="col-md-3 form-label mb-4">Slika Vašeg Automobila:</label>
                                            <div class="col-md-9">
                                                {{ image_form.management_form }}
                                                {% for form in image_form %}
                                                    {{ form.as_p }}
                                                {% endfor %}

                                            </div>
                                        </div>
                                        <!--End Row-->
                                    </div>
                                    <div class="card-footer">
                                        <!--Row-->
                                        <div class="row">
                                            <div class="col-md-3"></div>
                                            <div class="col-md-9">
                                                <button type='submit' class='btn btn-primary btn-lg'>Postavi</button>
                                                <a href="{% url 'ponude:ponude' %}" class="btn btn-outline-warning float-end btn-lg">Odustani</a>
                                            </div>
                                        </div>
                                        <!--End Row-->
                                    </div>
                                {% endif %}
                            </div>
                        </form>
                        <!-- END FORMA UNOSA ZAHTEVA -->
                    </div>
                </div>
                <!-- /ROW-1 CLOSED -->
            </div>
            <!-- CONTAINER CLOSED -->
        </div>
    </div>
{% endblock app_content %}

{% block extra-javascript %}
    <!-- INTERNAL WYSIWYG Editor JS -->
    <script src="{% static 'assets/plugins/wysiwyag/jquery.richtext.js' %}"></script>
    <script src="{% static 'assets/plugins/wysiwyag/wysiwyag.js' %}"></script>

    <!-- INTERNAL File-Uploads Js-->
    <script src="{% static 'assets/plugins/fancyuploder/jquery.ui.widget.js' %}"></script>
    <script src="{% static 'assets/plugins/fancyuploder/jquery.fileupload.js' %}"></script>
    <script src="{% static 'assets/plugins/fancyuploder/jquery.iframe-transport.js' %}"></script>
    <script src="{% static 'assets/plugins/fancyuploder/jquery.fancy-fileupload.js' %}"></script>
    <script src="{% static 'assets/plugins/fancyuploder/fancy-uploader.js' %}"></script>

    <!-- HTMX -->
    <script src="https://unpkg.com/htmx.org@1.8.3"></script>
{% endblock extra-javascript %}
